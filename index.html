<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>Ø¨Ø±Ù†Ø§Ù…Ù‡ Ø±ÙˆØ²Ø§Ù†Ù‡</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <style>
        body { font-family: Tahoma; background-color: #f4f4f4; direction: rtl; padding: 20px; }
        .container { max-width: 1100px; margin: auto; background: white; padding: 20px; border-radius: 8px; box-shadow: 0 0 10px rgba(0,0,0,0.1); }
        
        /* Ù‡Ø¯Ø± Ø§ØµÙ„ÛŒ */
        .header { display: flex; justify-content: space-between; align-items: center; border-bottom: 2px solid #333; padding-bottom: 10px; margin-bottom: 20px; }
        .header-item { font-weight: bold; }
        .header-item input, .header-item select { border: none; border-bottom: 1px dotted #000; outline: none; font-family: Tahoma; font-weight: bold; }

        /* Ø¬Ø¯ÙˆÙ„ */
        table { width: 100%; border-collapse: collapse; margin-bottom: 20px; }
        th, td { border: 1px solid #ccc; padding: 8px; text-align: center; }
        th { background: #34495e; color: white; }
        
        .no-export { border: none; }
        .btn { padding: 8px 15px; border: none; border-radius: 4px; cursor: pointer; color: white; font-family: Tahoma; }

        /* Ú©Ø§Ø¯Ø± Ú¯Ø²Ø§Ø±Ø´ Ú©Ø§Ø± */
        .report-box { border: 2px solid #34495e; padding: 20px; width: 300px; border-radius: 10px; margin-top: 30px; }
        .report-box h3 { text-align: center; margin-top: 0; font-size: 14px; border-bottom: 1px solid #ddd; padding-bottom: 5px; }
        .report-item { display: flex; justify-content: space-between; margin-bottom: 8px; align-items: center; }
        .report-item input { width: 60px; text-align: center; border: 1px solid #ccc; border-radius: 4px; padding: 3px; }
    </style>
</head>
<body>

<div class="container" id="main-area">
    <div class="header">
        <div class="header-item">Ø¨Ø±Ù†Ø§Ù…Ù‡ ØªÛŒÙ…ÛŒ: <input type="text" id="name"></div>
        <div class="header-item">Ø±ÙˆØ²: 
            <select id="dayName" onchange="updateTitle()">
                <option>Ø´Ù†Ø¨Ù‡</option><option>ÛŒÚ©Ø´Ù†Ø¨Ù‡</option><option>Ø¯ÙˆØ´Ù†Ø¨Ù‡</option>
                <option>Ø³Ù‡â€ŒØ´Ù†Ø¨Ù‡</option><option>Ú†Ù‡Ø§Ø±Ø´Ù†Ø¨Ù‡</option><option>Ù¾Ù†Ø¬Ø´Ù†Ø¨Ù‡</option><option>Ø¬Ù…Ø¹Ù‡</option>
            </select>
        </div>
        <div class="header-item">Ù…ÙˆØ±Ø®Ù‡: 
            <input type="text" id="day" value="11" style="width:25px;" oninput="updateTitle()">/
            <input type="text" id="month" value="11" style="width:25px;" oninput="updateTitle()">/
            <input type="text" id="year" value="1404" style="width:40px;" oninput="updateTitle()">
        </div>
    </div>

    <table>
        <thead>
            <tr>
                <th>Ø±Ø¯ÛŒÙ</th><th>Ù†ØªÛŒØ¬Ù‡</th><th>Ø¹Ù†ÙˆØ§Ù† Ø¬Ù„Ø³Ù‡</th><th>Ù…Ø®Ø§Ø·Ø¨</th><th>Ø³Ø§Ø¹Øª</th><th>Ù…Ú©Ø§Ù†</th>
            </tr>
        </thead>
        <tbody id="tableBody">
            </tbody>
    </table>

    <div class="report-box">
        <h3 id="reportTitle">Ú¯Ø²Ø§Ø±Ø´ Ú©Ø§Ø± Ø´Ù†Ø¨Ù‡ Û±Û´Û°Û´/Û±Û±/Û±Û±</h3>
        <div class="report-item"><label>ØªØ¹Ø¯Ø§Ø¯ Ù…Ø´Ø§ÙˆØ±:</label><input type="number" id="v1"></div>
        <div class="report-item"><label>Ø²Ù†Ú¯ Ø¯Ø¹ÙˆØª:</label><input type="number" id="v2"></div>
        <div class="report-item"><label>Ù¾Ø±Ø²Ù†Øª:</label><input type="number" id="v3"></div>
        <div class="report-item"><label>Ø§Ø±ØªØ¨Ø§Ø· Ù…ÙˆØ«Ø±:</label><input type="number" id="v4"></div>
        <div class="report-item"><label>Ø¢Ù…ÙˆØ²Ø´:</label><input type="number" id="v5"></div>
        <div class="report-item"><label>Ø«Ø¨Øª Ù†Ø§Ù…:</label><input type="number" id="v6"></div>
        <div class="report-item"><label>Ø§Ù…ØªÛŒØ§Ø² Ø®Ø±ÛŒØ¯:</label><input type="number" id="v7"></div>
        <button class="btn" style="background:#2980b9; width:100%; margin-top:10px;" onclick="shareText()">ğŸ“¤ Ø§Ø´ØªØ±Ø§Ú©â€ŒÚ¯Ø°Ø§Ø±ÛŒ Ú¯Ø²Ø§Ø±Ø´ Ú©Ø§Ø±</button>
    </div>
</div>

<div style="margin-top:20px; text-align:center;">
    <button class="btn" style="background:#8e44ad" onclick="downloadImg()">ğŸ’¾ Ø¯Ø§Ù†Ù„ÙˆØ¯ Ø¹Ú©Ø³ Ø¨Ø±Ù†Ø§Ù…Ù‡</button>
</div>

<script>
    function updateTitle() {
        const d = document.getElementById('day').value;
        const m = document.getElementById('month').value;
        const y = document.getElementById('year').value;
        const name = document.getElementById('dayName').value;
        document.getElementById('reportTitle').innerText = `Ú¯Ø²Ø§Ø±Ø´ Ú©Ø§Ø± ${name} ${y}/${m}/${d}`;
    }

    async function shareText() {
        const d = document.getElementById('day').value;
        const m = document.getElementById('month').value;
        const y = document.getElementById('year').value;
        const name = document.getElementById('dayName').value;
        
        const text = `Ø³Ù„Ø§Ù… Ùˆ Ø®Ø¯Ø§ Ù‚ÙˆØª ğŸŒº\n\nÚ¯Ø²Ø§Ø±Ø´ Ú©Ø§Ø±\n\n${name} ${y}/${m}/${d}\n\n` +
                     `ØªØ¹Ø¯Ø§Ø¯ Ù…Ø´Ø§ÙˆØ±Ø§Ù†: ${document.getElementById('v1').value || 0}\n` +
                     `Ø²Ù†Ú¯ Ø¯Ø¹ÙˆØª: ${document.getElementById('v2').value || 0}\n` +
                     `Ù¾Ø±Ø²Ù†Øª: ${document.getElementById('v3').value || 0}\n` +
                     `Ø§Ø±ØªØ¨Ø§Ø· Ù…ÙˆØ«Ø±: ${document.getElementById('v4').value || 0}\n` +
                     `Ø¢Ù…ÙˆØ²Ø´: ${document.getElementById('v5').value || 0}\n` +
                     `Ø«Ø¨Øª Ù†Ø§Ù…: ${document.getElementById('v6').value || 0}\n` +
                     `Ø§Ù…ØªÛŒØ§Ø² Ø®Ø±ÛŒØ¯: ${document.getElementById('v7').value || 0}`;

        if (navigator.share) {
            await navigator.share({ text: text });
        } else {
            navigator.clipboard.writeText(text);
            alert("Ú©Ù¾ÛŒ Ø´Ø¯");
        }
    }

    async function downloadImg() {
        const canvas = await html2canvas(document.getElementById('main-area'));
        const link = document.createElement('a');
        link.download = 'plan.jpg';
        link.href = canvas.toDataURL();
        link.click();
    }
</script>

</body>
</html>
